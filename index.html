<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcolatore Lievito Pro - Pizzeria Kintari</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .result-box {
            transition: all 0.3s ease-in-out;
        }
        .result-value {
            font-weight: 700;
            font-size: 1.75rem;
        }
        .warning-text {
            color: #d97706; /* amber-600 */
        }
        details > summary {
            list-style: none;
            cursor: pointer;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details[open] summary .arrow {
            transform: rotate(90deg);
        }
        .arrow {
            transition: transform 0.2s ease-in-out;
        }
        .lang-btn {
            transition: background-color 0.2s, color 0.2s;
        }
        .lang-btn.active {
            background-color: white;
            color: #dc2626; /* red-600 */
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-4xl bg-white rounded-2xl card-shadow overflow-hidden">
        <!-- Header -->
        <div class="bg-gradient-to-r from-red-600 to-yellow-500 p-6 relative">
            <h1 class="text-2xl md:text-3xl font-bold text-white text-center" data-lang-key="main_title">üçï Calcolatore Lievito Pro - Pizzeria Kintari</h1>
            <p class="text-white text-center mt-2" data-lang-key="subtitle">Parti dalla farina e ottieni la ricetta perfetta.</p>
            <!-- Language Switcher -->
            <div class="absolute top-4 right-4 bg-white/30 rounded-full p-1 flex text-sm">
                <button id="lang-it" class="lang-btn active rounded-full px-3 py-1 font-semibold">IT</button>
                <button id="lang-en" class="lang-btn rounded-full px-3 py-1 font-semibold text-white">EN</button>
            </div>
        </div>

        <div class="p-6 md:p-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Input Section -->
                <div class="flex flex-col space-y-5">
                    <h2 class="text-xl font-semibold text-gray-800 border-b pb-2" data-lang-key="dough_parameters">Parametri Impasto</h2>
                    <div>
                        <label for="farina" class="block text-sm font-medium text-gray-700 mb-2" data-lang-key="flour_weight">üåæ Peso Farina (kg)</label>
                        <input type="number" id="farina" value="1" step="0.1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
                    </div>
                     <div>
                        <label for="idratazione" class="block text-sm font-medium text-gray-700 mb-2" data-lang-key="hydration">üíß Idratazione (%)</label>
                        <input type="number" id="idratazione" value="65" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition" placeholder="Es. 65 o 110">
                    </div>
                     <div>
                        <label for="sale" class="block text-sm font-medium text-gray-700 mb-2" data-lang-key="salt">üßÇ Sale (% su farina)</label>
                        <input type="number" id="sale" value="2.5" step="0.1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
                    </div>
                    <div>
                        <label for="temperatura" class="block text-sm font-medium text-gray-700 mb-2" data-lang-key="temp">üå°Ô∏è Temperatura Ambiente (¬∞C)</label>
                        <input type="number" id="temperatura" value="20" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
                    </div>
                    <div>
                        <label for="ore" class="block text-sm font-medium text-gray-700 mb-2" data-lang-key="hours">‚è∞ Ore di Lievitazione (h)</label>
                        <input type="number" id="ore" value="8" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 transition">
                    </div>
                </div>

                <!-- Result Section -->
                <div class="flex flex-col space-y-5">
                     <h2 class="text-xl font-semibold text-gray-800 border-b pb-2" data-lang-key="recipe_results">Risultati Ricetta</h2>
                     <div class="result-box text-center w-full bg-gray-100 border-l-4 border-gray-500 p-4 rounded-lg">
                        <p class="text-sm font-medium text-gray-800" data-lang-key="total_weight">‚öñÔ∏è Peso Totale Impasto</p>
                        <p id="peso-totale" class="result-value text-gray-600">0.00 kg</p>
                    </div>
                    <div class="result-box text-center w-full bg-blue-100 border-l-4 border-blue-500 p-4 rounded-lg">
                        <p class="text-sm font-medium text-blue-800" data-lang-key="fresh_yeast">Lievito di Birra Fresco</p>
                        <p id="lievito-fresco" class="result-value text-blue-600">0.00 g</p>
                    </div>
                    <div class="result-box text-center w-full bg-green-100 border-l-4 border-green-500 p-4 rounded-lg">
                        <p class="text-sm font-medium text-green-800" data-lang-key="dry_yeast">Lievito Secco Attivo</p>
                        <p id="lievito-secco" class="result-value text-green-600">0.00 g</p>
                    </div>
                    <p id="warning" class="text-xs text-center warning-text mt-2 h-4"></p>
                </div>
            </div>
            
            <!-- Formula Section -->
            <div class="mt-8 border-t pt-6">
                <details>
                    <summary class="font-semibold text-gray-700 flex items-center justify-between">
                        <span data-lang-key="show_formulas">üî¨ Visualizza Formule di Calcolo</span>
                        <span class="arrow text-red-600 font-bold text-xl transform transition-transform duration-200">&#x276F;</span>
                    </summary>
                    <div class="mt-4 text-sm text-gray-600 bg-gray-50 p-4 rounded-lg space-y-3">
                        <p><strong data-lang-key="formula_1_title">1. Calcolo del Lievito Fresco:</strong><br><span data-lang-key="formula_1_desc">La quantit√† di lievito √® calcolata in base al peso della farina ed √® inversamente proporzionale alla temperatura e al tempo. Un coefficiente fisso bilancia la formula.</span><br>
                        <code class="text-xs bg-gray-200 p-1 rounded" data-lang-key="formula_1_code">Lievito Fresco (g) = (Peso Farina (kg) * 500) / (Temperatura * Ore)</code></p>
                        
                        <p><strong data-lang-key="formula_2_title">2. Conversione a Lievito Secco:</strong><br><span data-lang-key="formula_2_desc">Il lievito secco √® circa 3 volte pi√π potente di quello fresco (rapporto 1:3).</span><br>
                        <code class="text-xs bg-gray-200 p-1 rounded" data-lang-key="formula_2_code">Lievito Secco (g) = Lievito Fresco (g) / 3</code></p>

                        <p><strong data-lang-key="formula_3_title">3. Calcolo del Peso Totale dell'Impasto:</strong><br><span data-lang-key="formula_3_desc">Il peso finale √® la somma di farina, acqua (basata sull'idratazione) e sale.</span><br>
                        <code class="text-xs bg-gray-200 p-1 rounded" data-lang-key="formula_3_code_1">Acqua (kg) = Peso Farina * (%Idratazione / 100)</code><br>
                        <code class="text-xs bg-gray-200 p-1 rounded" data-lang-key="formula_3_code_2">Sale (kg) = Peso Farina * (%Sale / 100)</code><br>
                        <code class="text-xs bg-gray-200 p-1 rounded" data-lang-key="formula_3_code_3">Peso Totale = Peso Farina + Acqua + Sale</code></p>
                    </div>
                </details>
            </div>
        </div>
    </div>

    <script>
        // --- TRANSLATION DATA ---
        const translations = {
            it: {
                doc_title: "Calcolatore Lievito Pro - Pizzeria Kintari",
                main_title: "üçï Calcolatore Lievito Pro - Pizzeria Kintari",
                subtitle: "Parti dalla farina e ottieni la ricetta perfetta.",
                dough_parameters: "Parametri Impasto",
                flour_weight: "üåæ Peso Farina (kg)",
                hydration: "üíß Idratazione (%)",
                salt: "üßÇ Sale (% su farina)",
                temp: "üå°Ô∏è Temperatura Ambiente (¬∞C)",
                hours: "‚è∞ Ore di Lievitazione (h)",
                recipe_results: "Risultati Ricetta",
                total_weight: "‚öñÔ∏è Peso Totale Impasto",
                fresh_yeast: "Lievito di Birra Fresco",
                dry_yeast: "Lievito Secco Attivo",
                show_formulas: "üî¨ Visualizza Formule di Calcolo",
                formula_1_title: "1. Calcolo del Lievito Fresco:",
                formula_1_desc: "La quantit√† di lievito √® calcolata in base al peso della farina ed √® inversamente proporzionale alla temperatura e al tempo. Un coefficiente fisso bilancia la formula.",
                formula_1_code: "Lievito Fresco (g) = (Peso Farina (kg) * 500) / (Temperatura * Ore)",
                formula_2_title: "2. Conversione a Lievito Secco:",
                formula_2_desc: "Il lievito secco √® circa 3 volte pi√π potente di quello fresco (rapporto 1:3).",
                formula_2_code: "Lievito Secco (g) = Lievito Fresco (g) / 3",
                formula_3_title: "3. Calcolo del Peso Totale dell'Impasto:",
                formula_3_desc: "Il peso finale √® la somma di farina, acqua (basata sull'idratazione) e sale.",
                formula_3_code_1: "Acqua (kg) = Peso Farina * (%Idratazione / 100)",
                formula_3_code_2: "Sale (kg) = Peso Farina * (%Sale / 100)",
                formula_3_code_3: "Peso Totale = Peso Farina + Acqua + Sale",
                warning_temp: "Temp. fuori range ottimale (16-30¬∞C).",
                warning_hours: "Ore di lievitazione fuori range (2-72h).",
                warning_invalid: "Inserire valori validi."
            },
            en: {
                doc_title: "Pro Yeast Calculator - Kintari Pizzeria",
                main_title: "üçï Pro Yeast Calculator - Kintari Pizzeria",
                subtitle: "Start with flour and get the perfect recipe.",
                dough_parameters: "Dough Parameters",
                flour_weight: "üåæ Flour Weight (kg)",
                hydration: "üíß Hydration (%)",
                salt: "üßÇ Salt (% on flour)",
                temp: "üå°Ô∏è Ambient Temperature (¬∞C)",
                hours: "‚è∞ Leavening Hours (h)",
                recipe_results: "Recipe Results",
                total_weight: "‚öñÔ∏è Total Dough Weight",
                fresh_yeast: "Fresh Yeast",
                dry_yeast: "Active Dry Yeast",
                show_formulas: "üî¨ Show Calculation Formulas",
                formula_1_title: "1. Fresh Yeast Calculation:",
                formula_1_desc: "The amount of yeast is calculated based on the flour weight and is inversely proportional to temperature and time. A fixed coefficient balances the formula.",
                formula_1_code: "Fresh Yeast (g) = (Flour Weight (kg) * 500) / (Temperature * Hours)",
                formula_2_title: "2. Dry Yeast Conversion:",
                formula_2_desc: "Dry yeast is about 3 times more potent than fresh yeast (1:3 ratio).",
                formula_2_code: "Dry Yeast (g) = Fresh Yeast (g) / 3",
                formula_3_title: "3. Total Dough Weight Calculation:",
                formula_3_desc: "The final weight is the sum of flour, water (based on hydration), and salt.",
                formula_3_code_1: "Water (kg) = Flour Weight * (%Hydration / 100)",
                formula_3_code_2: "Salt (kg) = Flour Weight * (%Salt / 100)",
                formula_3_code_3: "Total Weight = Flour Weight + Water + Salt",
                warning_temp: "Temp. out of optimal range (16-30¬∞C).",
                warning_hours: "Leavening hours out of range (2-72h).",
                warning_invalid: "Please enter valid values."
            }
        };
        
        let currentLanguage = 'it';

        // --- DOM ELEMENT REFERENCES ---
        const farinaInput = document.getElementById('farina');
        const idratazioneInput = document.getElementById('idratazione');
        const saleInput = document.getElementById('sale');
        const temperaturaInput = document.getElementById('temperatura');
        const oreInput = document.getElementById('ore');
        
        const pesoTotaleOutput = document.getElementById('peso-totale');
        const lievitoFrescoOutput = document.getElementById('lievito-fresco');
        const lievitoSeccoOutput = document.getElementById('lievito-secco');
        const warningOutput = document.getElementById('warning');
        
        const langItBtn = document.getElementById('lang-it');
        const langEnBtn = document.getElementById('lang-en');

        /**
         * Sets the application language and updates all text elements.
         * @param {string} lang - The language to set ('it' or 'en').
         */
        function setLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.lang = lang;
            
            // Update all elements with a data-lang-key attribute
            document.querySelectorAll('[data-lang-key]').forEach(elem => {
                const key = elem.getAttribute('data-lang-key');
                if (translations[lang][key]) {
                    elem.innerHTML = translations[lang][key];
                }
            });
            
            // Update document title
            document.title = translations[lang].doc_title;

            // Update button styles
            if (lang === 'it') {
                langItBtn.classList.add('active');
                langEnBtn.classList.remove('active');
                langEnBtn.classList.add('text-white');
            } else {
                langEnBtn.classList.add('active');
                langItBtn.classList.remove('active');
                langItBtn.classList.remove('text-white');
            }

            // Recalculate to update potential warning messages
            calcolaRicetta();
        }

        /**
         * Calculates yeast and total dough weight based on flour weight and other parameters.
         */
        function calcolaRicetta() {
            // Get values from inputs
            const pesoFarinaKg = parseFloat(farinaInput.value);
            const idratazione = parseFloat(idratazioneInput.value);
            const salePercent = parseFloat(saleInput.value);
            const temp = parseFloat(temperaturaInput.value);
            const ore = parseFloat(oreInput.value);

            // --- Validation ---
            if (isNaN(pesoFarinaKg) || isNaN(idratazione) || isNaN(salePercent) || isNaN(temp) || isNaN(ore) || pesoFarinaKg <= 0 || ore <= 0 || temp <= 0 || idratazione <=0) {
                lievitoFrescoOutput.textContent = '---';
                lievitoSeccoOutput.textContent = '---';
                pesoTotaleOutput.textContent = '---';
                warningOutput.textContent = translations[currentLanguage].warning_invalid;
                return;
            }
            
            // --- Warning for unusual ranges ---
            let warningMessage = '';
            if (temp < 16 || temp > 30) {
                warningMessage = translations[currentLanguage].warning_temp;
            } else if (ore < 2 || ore > 72) {
                warningMessage = translations[currentLanguage].warning_hours;
            }
            warningOutput.textContent = warningMessage;

            // --- Calculation Logic ---
            const COEFFICIENTE_LIEVITAZIONE = 500; 
            let lievitoFrescoGrammi = (pesoFarinaKg * COEFFICIENTE_LIEVITAZIONE) / (temp * ore);
            let lievitoSeccoGrammi = lievitoFrescoGrammi / 3;
            
            lievitoFrescoGrammi = Math.max(lievitoFrescoGrammi, 0.05);
            lievitoSeccoGrammi = Math.max(lievitoSeccoGrammi, 0.02);

            const pesoAcquaKg = pesoFarinaKg * (idratazione / 100);
            const pesoSaleKg = pesoFarinaKg * (salePercent / 100);
            const pesoTotaleKg = pesoFarinaKg + pesoAcquaKg + pesoSaleKg;

            // --- Update UI ---
            lievitoFrescoOutput.textContent = `${lievitoFrescoGrammi.toFixed(2)} g`;
            lievitoSeccoOutput.textContent = `${lievitoSeccoGrammi.toFixed(2)} g`;
            pesoTotaleOutput.textContent = `${pesoTotaleKg.toFixed(3)} kg`;
        }

        // --- EVENT LISTENERS ---
        const inputs = [farinaInput, idratazioneInput, saleInput, temperaturaInput, oreInput];
        inputs.forEach(input => input.addEventListener('input', calcolaRicetta));

        langItBtn.addEventListener('click', () => setLanguage('it'));
        langEnBtn.addEventListener('click', () => setLanguage('en'));

        // --- INITIALIZATION ---
        window.addEventListener('load', () => {
            setLanguage('it'); // Set initial language and calculate
        });
    </script>

</body>
</html>
